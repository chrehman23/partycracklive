{"ast":null,"code":"import _regeneratorRuntime from\"D:/react/backup chat/partycracklive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/react/backup chat/partycracklive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:/react/backup chat/partycracklive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/react/backup chat/partycracklive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/react/backup chat/partycracklive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/react/backup chat/partycracklive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{withRouter,Link}from'react-router-dom';import listedimg from\"../../../assets/imgs/coffee-table.png\";import favouriteimg from\"../../../assets/imgs/favourite.png\";import ListEdit from\"../editListing/index\";import{NotificationContainer,NotificationManager}from'react-notifications';import'react-notifications/lib/notifications.css';import{Modal,Button,Spinner}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var vendorDashboard=/*#__PURE__*/function(_React$Component){_inherits(vendorDashboard,_React$Component);var _super=_createSuper(vendorDashboard);function vendorDashboard(){var _this;_classCallCheck(this,vendorDashboard);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={listing:[],totalItem:\"\",edit:false,listId:\"\",status:\"\",show:false,listData:null,loading:false,welcome:false,vendorName:\"\"};_this.handleClose=function(){_this.setState({show:false});};_this.handleShow=function(data){_this.setState({show:true,listData:data});};_this.deleteItem=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_id=_this.state.listData._id;_context.next=3;return axios.post(\"\".concat(process.env.REACT_APP_API,\"/api/auth/deletelisting\"),{id:_id},{headers:{Authorization:\"Bearer \".concat(_this.state.token)}}).then(function(res){if(res.data.success){NotificationManager.success('Delete successfuly','',800);_this.getListing();_this.handleClose();}});case 3:case\"end\":return _context.stop();}}},_callee);}));_this.getListing=function(){var token=localStorage.getItem(\"token\");var name=localStorage.getItem(\"name\");axios.get(\"\".concat(process.env.REACT_APP_API,\"/api/auth/showlisting\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(res){if(res.data.success){_this.setState({listing:res.data.listing,totalItem:res.data.count,vendorName:name});}_this.setState({loading:true});});};return _this;}_createClass(vendorDashboard,[{key:\"componentDidMount\",value:function componentDidMount(){var token=localStorage.getItem(\"token\");if(token){this.getListing();}else{this.props.history.push(\"/\");}var loginData=JSON.parse(localStorage.getItem(\"checkin\"));if(loginData&&loginData.length){var data=loginData.filter(function(data){if(data.isTime==true){return data;}});console.log(data);if(data.length>0){this.setState({welcome:true});}var newData=loginData.map(function(el){if(el.uni==localStorage.getItem(\"vendor_id\")&&el.isTime==true)return Object.assign({},el,{isTime:false});return el;});localStorage.setItem(\"checkin\",JSON.stringify(newData));}}},{key:\"render\",value:function render(){var _this2=this;var listing=this.state.listing;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:this.props.SideBar?\"content-body\":\"content-body extended\",children:[this.state.loading?/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-page-header\",children:[this.state.welcome?/*#__PURE__*/_jsx(\"h3\",{style:{color:\"#dd3b45\"},children:\"Welcome\"}):\"\",/*#__PURE__*/_jsxs(\"h3\",{className:\"dashboard-page-title\",children:[\"Hi, \",this.state.vendorName.toUpperCase(),\".\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row dasboardlist\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-xl-4 col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"widget-stat card bg-danger\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"media\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-3\",children:/*#__PURE__*/_jsx(\"img\",{src:listedimg,alt:\"image\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-body text-white\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-1\",children:\"Total Listed Item\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-white\",children:this.state.totalItem})]})]})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-12 mt-3 mt-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"card-title mb-2\",children:\"Your Listings\"})}),this.state.totalItem==0?/*#__PURE__*/_jsx(\"button\",{className:\"payment-btn\",onClick:function onClick(){_this2.props.history.push(\"/packages\");},children:\"Add your first listing\"}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:listing.map(function(data,i){return/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-list-block\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-2 col-lg-4 col-md-12 col-sm-12 col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-list-img\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_API,\"/\").concat(data.Profile_Pic),alt:\"\",className:\"img-fluid\"})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-7 col-lg-5 col-md-6 col-sm-12 col-12 \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-list-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"title\",children:data.Name})}),/*#__PURE__*/_jsx(\"p\",{children:data.Address.Address}),/*#__PURE__*/_jsx(\"p\",{style:{lineHeight:\"0\",margin:\"0px\",fontSize:\"12px\",fontWeight:\"500\"},children:data.updatedAt.slice(0,10)}),/*#__PURE__*/_jsx(\"p\",{style:{lineHeight:\"0px\",marginTop:\"20px\",marginBottom:\"-13px\"},children:data.updatedAt.slice(11,19)})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-list-btn\",children:[/*#__PURE__*/_jsx(Link,{to:\"/editlisting/\".concat(data._id),className:\"btn btn-outline-violate btn-xs\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:function onClick(){_this2.handleShow(data);},className:\"btn btn-outline-pink btn-xs\",children:\"Delete\"})]})})]})})});})})})]})})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"spinner\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"danger\"})}),/*#__PURE__*/_jsxs(Modal,{style:{marginTop:\"100px\"},show:this.state.show,onHide:this.handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Delete Confirmation\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:\"Are You Sure Want To Delete?\"}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:this.handleClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:this.deleteItem,children:\"Delete\"})]})]})]}),/*#__PURE__*/_jsx(NotificationContainer,{})]});}}]);return vendorDashboard;}(React.Component);export default withRouter(vendorDashboard);","map":{"version":3,"sources":["D:/react/backup chat/partycracklive/src/Components/venderDashboard/dashboard/index.jsx"],"names":["React","axios","withRouter","Link","listedimg","favouriteimg","ListEdit","NotificationContainer","NotificationManager","Modal","Button","Spinner","vendorDashboard","state","listing","totalItem","edit","listId","status","show","listData","loading","welcome","vendorName","handleClose","setState","handleShow","data","deleteItem","_id","post","process","env","REACT_APP_API","id","headers","Authorization","token","then","res","success","getListing","localStorage","getItem","name","get","count","props","history","push","loginData","JSON","parse","length","filter","isTime","console","log","newData","map","el","uni","Object","assign","setItem","stringify","SideBar","color","toUpperCase","i","Profile_Pic","Name","Address","lineHeight","margin","fontSize","fontWeight","updatedAt","slice","marginTop","marginBottom","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios'\r\nimport { withRouter,Link } from 'react-router-dom';\r\nimport listedimg from \"../../../assets/imgs/coffee-table.png\"\r\nimport favouriteimg from \"../../../assets/imgs/favourite.png\"\r\nimport ListEdit from \"../editListing/index\"\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\nimport { Modal, Button,Spinner } from \"react-bootstrap\";\r\n\r\n\r\nclass vendorDashboard extends React.Component {\r\n    state = {\r\n        listing: [],\r\n        totalItem: \"\",\r\n        edit: false,\r\n        listId: \"\",\r\n        status: \"\",\r\n        show: false,\r\n        listData: null,\r\n        loading:false,\r\n        welcome:false,\r\n        vendorName:\"\"\r\n    }\r\n\r\n\r\n    handleClose = () => { this.setState({ show: false }) };\r\n    handleShow = (data) => { this.setState({ show: true, listData: data }) };\r\n\r\n    deleteItem = async () => {\r\n        let { _id } = this.state.listData\r\n        await axios.post(`${process.env.REACT_APP_API}/api/auth/deletelisting`,\r\n            { id: _id },\r\n            {\r\n                headers: {\r\n                    Authorization: `Bearer ${this.state.token}`\r\n                }\r\n            }).then((res) => {\r\n                if (res.data.success) {\r\n                    NotificationManager.success('Delete successfuly', '', 800);\r\n                    this.getListing()\r\n                    this.handleClose()\r\n                }\r\n            })\r\n    }\r\n\r\n    componentDidMount() {\r\n        let token = localStorage.getItem(\"token\")\r\n        if (token) {\r\n            this.getListing()\r\n        } else {\r\n            this.props.history.push(\"/\")\r\n        }\r\n\r\n        let loginData=JSON.parse(localStorage.getItem(\"checkin\"))\r\n      if(loginData && loginData.length){\r\n        let data=loginData.filter((data)=>{\r\n            if(data.isTime==true){\r\n                return data\r\n            }\r\n        })\r\n        console.log(data)\r\n        if(data.length>0){\r\n            this.setState({\r\n                welcome:true\r\n            })\r\n        }\r\n        var newData = loginData.map(el => {\r\n            if((el.uni==localStorage.getItem(\"vendor_id\") && el.isTime == true))\r\n               return Object.assign({}, el, {isTime:false})\r\n            return el\r\n        });\r\n        localStorage.setItem(\"checkin\",JSON.stringify(newData))\r\n      }\r\n\r\n    }\r\n\r\n    getListing = () => {\r\n        let token = localStorage.getItem(\"token\");\r\n        let name=localStorage.getItem(\"name\");\r\n\r\n        axios.get(`${process.env.REACT_APP_API}/api/auth/showlisting`, {\r\n            headers: {\r\n                Authorization: `Bearer ${token}`\r\n            }\r\n        }).then(res => {\r\n            if (res.data.success) {\r\n                this.setState({\r\n                    listing: res.data.listing,\r\n                    totalItem: res.data.count,\r\n                    vendorName:name\r\n                })\r\n            }\r\n            this.setState({\r\n                loading:true\r\n            })\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let { listing } = this.state\r\n\r\n        return (\r\n            <>\r\n                    <div className={this.props.SideBar ? \"content-body\" : \"content-body extended\"}>\r\n                       {this.state.loading ?\r\n                        <div className=\"container-fluid\">\r\n                            <div className=\"dashboard-page-header\">\r\n                       {this.state.welcome?<h3 style={{color:\"#dd3b45\"}} >Welcome</h3> : \"\"}\r\n\r\n                                <h3 className=\"dashboard-page-title\">Hi, {this.state.vendorName.toUpperCase()}.</h3>\r\n                            </div>\r\n                            <div className=\"row dasboardlist\">\r\n                                <div className=\"col-12 col-xl-4 col-md-6\">\r\n                                    <div className=\"widget-stat card bg-danger\">\r\n                                        <a href=\"#0\">\r\n                                            <div className=\"card-body p-4\">\r\n                                                <div className=\"media\">\r\n                                                    <span className=\"mr-3\">\r\n                                                        <img src={listedimg} alt=\"image\" />\r\n                                                    </span>\r\n                                                    <div className=\"media-body text-white\">\r\n                                                        <p className=\"mb-1\">Total Listed Item</p>\r\n                                                        <h3 className=\"text-white\">{this.state.totalItem}</h3>\r\n{/*                                                         <div className=\"progress mb-2 bg-primary\">\r\n                                                            <div className=\"progress-bar progress-animated bg-light\"\r\n                                                                style={{ width: '50%' }} />\r\n                                                        </div> */}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </a>\r\n                                    </div>\r\n                                </div>\r\n                                {/*                  <div className=\"col-12 col-xl-4 col-md-6\">\r\n                     <div className=\"widget-stat card bg-primary\">\r\n                         <a href=\"#\">\r\n                             <div className=\"card-body  p-4\">\r\n                                 <div className=\"media\">\r\n                                     <span className=\"mr-3\">\r\n                                         <img src={favouriteimg} alt=\"image\"/>\r\n                                     </span>\r\n                                     <div className=\"media-body text-white\">\r\n                                         <p className=\"mb-1\">Your Reviews</p>\r\n                                         <h3 className=\"text-white\">200</h3>\r\n                                         <div className=\"progress mb-2 bg-secondary\">\r\n                                             <div className=\"progress-bar progress-animated bg-light\"\r\n                                                  style={{width: '80%'}}/>\r\n                                         </div>\r\n                                     </div>\r\n                                 </div>\r\n                             </div>\r\n                         </a>\r\n                     </div>\r\n                 </div> */}\r\n                                <div className=\"col-12 col-lg-12 mt-3 mt-lg-4\">\r\n                                    <div className=\"card\">\r\n                                        <div className=\"card-header\">\r\n                                            <h4 className=\"card-title mb-2\">Your Listings</h4>\r\n                                        </div>\r\n                                        {\r\n                                            this.state.totalItem==0 ?\r\n                                            <button className=\"payment-btn\" onClick={()=>{this.props.history.push(\"/packages\")}}>Add your first listing</button>\r\n                                            :\r\n                                            <>\r\n                                        <div className=\"card-body\">\r\n                                                {listing.map((data, i) => {\r\n                                                    return (\r\n                                                        <div className=\"col-lg-12\">\r\n                                                            <div className=\"dashboard-list-block\">\r\n                                                                <div className=\"row\">\r\n                                                                    <div\r\n                                                                        className=\"col-xl-2 col-lg-4 col-md-12 col-sm-12 col-12\">\r\n                                                                        <div className=\"dashboard-list-img\">\r\n                                                                            <a href=\"#\">\r\n                                                                                <img\r\n                                                                                    src={`${process.env.REACT_APP_API}/${data.Profile_Pic}`} alt=\"\"\r\n                                                                                    className=\"img-fluid\" />\r\n                                                                            </a>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div\r\n                                                                        className=\"col-xl-7 col-lg-5 col-md-6 col-sm-12 col-12 \">\r\n                                                                        <div className=\"dashboard-list-content\">\r\n                                                                            <h3 className=\"\">\r\n                                                                                <a href=\"#\"\r\n                                                                                    className=\"title\">{data.Name}</a>\r\n                                                                            </h3>\r\n                                                                            <p>{data.Address.Address}</p>\r\n                                                                            <p style={{lineHeight:\"0\",margin: \"0px\",fontSize: \"12px\",fontWeight: \"500\"}}>{data.updatedAt.slice(0,10)}</p>\r\n                                                                            <p style={{lineHeight:\"0px\",marginTop: \"20px\",marginBottom: \"-13px\"}}>{data.updatedAt.slice(11,19)}</p>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div\r\n                                                                        className=\"col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12\">\r\n                                                                        <div className=\"dashboard-list-btn\">\r\n                                                                            <Link to={`/editlisting/${data._id}`} className=\"btn btn-outline-violate btn-xs\">Edit</Link>\r\n                                                                            <a href=\"#\" onClick={() => {\r\n                                                                                this.handleShow(data)\r\n                                                                            }}\r\n                                                                                className=\"btn btn-outline-pink btn-xs\">Delete</a>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    )\r\n                                                })}\r\n\r\n                                            </div>\r\n                                            </>\r\n                                        }\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n    \r\n                        </div>\r\n                        :\r\n                        <div className=\"spinner\">\r\n                        <Spinner animation=\"border\" variant=\"danger\" />\r\n                        </div>\r\n                                            }\r\n\r\n                                            \r\n                        <Modal style={{ marginTop: \"100px\" }} show={this.state.show} onHide={this.handleClose}>\r\n                            <Modal.Header closeButton>\r\n                                <Modal.Title>Delete Confirmation</Modal.Title>\r\n                            </Modal.Header>\r\n                            <Modal.Body>Are You Sure Want To Delete?</Modal.Body>\r\n                            <Modal.Footer>\r\n                                <Button variant=\"secondary\" onClick={this.handleClose}>\r\n                                    Cancel\r\n                                  </Button>\r\n                                <Button variant=\"primary\" onClick={this.deleteItem}>\r\n                                    Delete\r\n                                        </Button>\r\n                            </Modal.Footer>\r\n                        </Modal>\r\n                    </div>\r\n                \r\n                <NotificationContainer />\r\n\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(vendorDashboard);"]},"metadata":{},"sourceType":"module"}