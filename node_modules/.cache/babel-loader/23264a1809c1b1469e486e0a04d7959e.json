{"ast":null,"code":"var _jsxFileName = \"D:\\\\react\\\\backup chat\\\\partycracklive\\\\src\\\\Components\\\\Modals\\\\mobileVerification.jsx\";\nimport React from 'react';\nimport Footer from \"../../Components/footer/footer\";\nimport Header from \"../../Components/topHeader/index\";\nimport axios from \"axios\";\nimport { Link, withRouter } from 'react-router-dom';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nimport 'react-notifications/lib/notifications.css';\nimport AddListing from \"../../Components/venderDashboard/addNewListing/index\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst validateForm = errors => {\n  let valid = true;\n  Object.values(errors).forEach(val => val.length > 0 && (valid = false));\n  return valid;\n};\n\nclass MobileVeriication extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      code: null,\n      otpErr: false,\n      errors: {\n        code: ''\n      },\n      termsErr: false,\n      terms: false,\n      listingId: \"\",\n      addList: false,\n      payment: false\n    };\n\n    this.handleChange = event => {\n      event.preventDefault();\n      const {\n        name,\n        value\n      } = event.target;\n      let errors = this.state.errors;\n\n      switch (name) {\n        case 'code':\n          errors.code = value.length < 6 ? 'Code must be 6 Characters long' : '';\n          break;\n\n        default:\n          break;\n      }\n\n      this.setState({\n        errors,\n        [name]: value\n      });\n    };\n\n    this.varifyCode = async () => {\n      let data = {\n        Mobile_Number: this.props.mobileNumber,\n        OTP: this.state.code\n      };\n      await axios.post(`${process.env.REACT_APP_API}/api/auth/mobileotpverification`, data).then(res => {\n        if (res.data.Error == false) {\n          this.addListing();\n        } else {\n          this.setState({\n            otpErr: true\n          });\n        }\n      });\n    };\n\n    this.addListing = async () => {\n      let token = localStorage.getItem(\"token\");\n      let that = this;\n      const Config = {\n        onUploadProgress: function (progressEvent) {\n          let percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total); // that.setState({ filesProgress: percentCompleted });\n        },\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      };\n      await axios.post(`${process.env.REACT_APP_API}/api/auth/addlisting`, this.props.formData, Config).then(res => {\n        if (res.data.success) {\n          this.props.paymentModalShow(res.data.listing._id); // this.paymentMethod(res.data.listing._id)\n        } else {\n          console.log(\"error\");\n        }\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      this.setState({\n        otpErr: false,\n        termsErr: false\n      });\n      let id = localStorage.getItem('vendor_id');\n\n      if (this.state.terms == false) {\n        this.setState({\n          termsErr: true\n        });\n      } else if (validateForm(this.state.errors)) {\n        this.varifyCode();\n      } else {}\n    };\n\n    this.paymentMethod = Listid => {\n      let id = localStorage.getItem(\"vendor_id\");\n      let Name = localStorage.getItem('packagename');\n      let Price = localStorage.getItem('packageprice');\n      let data = {\n        vendor_id: id,\n        listing_id: Listid,\n        payment_type: \"Paypal\",\n        package: {\n          name: Name,\n          price: Price\n        },\n        paypal: {\n          token: \"864as6d846\",\n          payId: \"asdasdsadsad\"\n        }\n      };\n      axios.put(`${process.env.REACT_APP_API}/api/auth/getPaypal`, data).then(res => {\n        if (res.data.url) {\n          window.location.href = res.data.url;\n        } else {\n          console.log(\"error\");\n        }\n      });\n    };\n\n    this.resend = () => {\n      let data = {\n        Mobile_Number: this.props.mobileNumber\n      };\n      axios.post(`${process.env.REACT_APP_API}/api/auth/resendotpmobile`, data).then(res => {\n        if (res.data.Error == false) {\n          NotificationManager.success('OTP has sent to your mobile number ', '', 800);\n        }\n      });\n    };\n  }\n\n  render() {\n    let {\n      errors\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Modal, {\n        style: {\n          marginTop: \"100px\"\n        },\n        show: this.props.show,\n        onHide: this.props.handleClose,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          closeButton: true,\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"OTP\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              textAlign: \"center\"\n            },\n            children: \"Your mobile number needs to be validated to proceed. An OTP has been sent on your mobile.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 45\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              textAlign: \"center\"\n            },\n            children: \"Enter OTP To Verify Mobile Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 45\n          }, this), this.state.otpErr ? /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              textAlign: \"center\",\n              color: \"red\",\n              marginTop: \"20px\"\n            },\n            children: \"OTP is Invalid\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 65\n          }, this) : \"\", this.state.termsErr ? /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              textAlign: \"center\",\n              color: \"red\"\n            },\n            children: \"Please accept privacy policy and terms and conditions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 68\n          }, this) : \"\", /*#__PURE__*/_jsxDEV(\"form\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: this.state.code,\n                name: \"code\",\n                onChange: this.handleChange,\n                className: \"form-control\",\n                id: \"\",\n                placeholder: \"OTP CODE\",\n                noValidate: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 57\n              }, this), errors.code.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"error\",\n                children: errors.code\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 61\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 53\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                margin: \"20px 0px\"\n              },\n              className: \"custom-control custom-checkbox\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                value: this.state.terms,\n                onChange: e => {\n                  this.setState({\n                    terms: !this.state.terms\n                  });\n                },\n                className: \"custom-control-input\",\n                id: \"pc1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"custom-control-label\",\n                htmlFor: \"pc1\",\n                children: [\"I agree to \", /*#__PURE__*/_jsxDEV(Link, {\n                  target: \"_blank\",\n                  to: \"/privacyandpolicy\",\n                  children: \"privacy policy \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 52\n                }, this), \"and \", /*#__PURE__*/_jsxDEV(Link, {\n                  target: \"_blank\",\n                  to: \"/termsandconditions\",\n                  children: \"terms & conditions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 123\n                }, this), \".\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 53\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: this.handleSubmit,\n              className: \"submit w-100 mt-2\",\n              children: \"Continue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 53\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: this.resend,\n              className: \"submit w-100 mt-2\",\n              children: \"Resend\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 54\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 55\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            onClick: this.props.handleClose,\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nexport default _c = withRouter(MobileVeriication);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["D:/react/backup chat/partycracklive/src/Components/Modals/mobileVerification.jsx"],"names":["React","Footer","Header","axios","Link","withRouter","NotificationContainer","NotificationManager","AddListing","Button","Modal","validateForm","errors","valid","Object","values","forEach","val","length","MobileVeriication","Component","state","code","otpErr","termsErr","terms","listingId","addList","payment","handleChange","event","preventDefault","name","value","target","setState","varifyCode","data","Mobile_Number","props","mobileNumber","OTP","post","process","env","REACT_APP_API","then","res","Error","addListing","token","localStorage","getItem","that","Config","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","headers","Authorization","formData","success","paymentModalShow","listing","_id","console","log","handleSubmit","id","paymentMethod","Listid","Name","Price","vendor_id","listing_id","payment_type","package","price","paypal","payId","put","url","window","location","href","resend","render","marginTop","show","handleClose","textAlign","color","margin","e"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Footer from \"../../Components/footer/footer\"\r\nimport Header from \"../../Components/topHeader/index\"\r\nimport axios from \"axios\";\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\nimport AddListing from \"../../Components/venderDashboard/addNewListing/index\"\r\nimport {Button,Modal} from \"react-bootstrap\"\r\n\r\n\r\n\r\n;\r\nconst validateForm = errors => {\r\n    let valid = true;\r\n    Object.values(errors).forEach(val => val.length > 0 && (valid = false));\r\n    return valid;\r\n};\r\n\r\nclass MobileVeriication extends React.Component {\r\n    state = {\r\n        code: null,\r\n        otpErr:false,\r\n        errors: {\r\n            code: '',\r\n        },\r\n        termsErr:false,\r\n        terms:false,\r\n        listingId:\"\",\r\n        addList:false,\r\n        payment:false\r\n    }\r\n    handleChange = (event) => {\r\n        event.preventDefault();\r\n        const { name, value } = event.target;\r\n        let errors = this.state.errors;\r\n\r\n        switch (name) {\r\n            case 'code':\r\n                errors.code =\r\n                    value.length <6\r\n                        ? 'Code must be 6 Characters long'\r\n                        : '';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        this.setState({ errors, [name]: value });\r\n    }\r\n\r\nvarifyCode=async()=>{\r\n    let data={\r\n        Mobile_Number: this.props.mobileNumber,\r\n        OTP: this.state.code\r\n    }\r\n   await axios.post(`${process.env.REACT_APP_API}/api/auth/mobileotpverification`, data).then(res => {\r\n        if (res.data.Error==false) {\r\n        this.addListing()\r\n        }\r\n        else {\r\n         this.setState({\r\n             otpErr:true\r\n         })\r\n        }\r\n      })\r\n}\r\naddListing=async()=>{\r\n    let token = localStorage.getItem(\"token\")\r\n    let that = this;\r\n    const Config = {\r\n      onUploadProgress: function (progressEvent) {\r\n        let percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n        // that.setState({ filesProgress: percentCompleted });\r\n      },\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      }\r\n    }\r\n   await axios.post(`${process.env.REACT_APP_API}/api/auth/addlisting`, this.props.formData, Config).then(res => {\r\n        if (res.data.success) {      \r\n            this.props.paymentModalShow(res.data.listing._id)                      \r\n         // this.paymentMethod(res.data.listing._id)\r\n        }\r\n        else {\r\n          console.log(\"error\")\r\n        }\r\n      }) \r\n}\r\n\r\n    handleSubmit =  (event) => {\r\n        event.preventDefault();\r\n        this.setState({\r\n            otpErr:false,\r\n            termsErr:false\r\n        })\r\n\r\n        let id =localStorage.getItem('vendor_id')\r\n        if(this.state.terms==false){\r\n           this.setState({\r\n               termsErr:true\r\n           })\r\n        }\r\n        else if (validateForm(this.state.errors)){\r\n             this.varifyCode();\r\n        }else{\r\n\r\n        } \r\n    }\r\n    paymentMethod=(Listid)=>{\r\n        let id = localStorage.getItem(\"vendor_id\")\r\n        let Name = localStorage.getItem('packagename')\r\n        let Price = localStorage.getItem('packageprice')\r\n        let data = {\r\n            vendor_id: id,\r\n            listing_id: Listid,\r\n            payment_type: \"Paypal\",\r\n            package: {\r\n              name: Name,\r\n              price: Price\r\n            },\r\n            paypal: {\r\n              token: \"864as6d846\",\r\n              payId: \"asdasdsadsad\"\r\n            }\r\n      \r\n          }\r\n         axios.put(`${process.env.REACT_APP_API}/api/auth/getPaypal`, data).then(res => {\r\n            if (res.data.url) {\r\n              window.location.href = res.data.url\r\n            }\r\n            else {\r\n              console.log(\"error\")\r\n            }\r\n          })\r\n    }\r\n   resend=()=>{\r\n    let data={\r\n        Mobile_Number:this.props.mobileNumber\r\n    }\r\n       axios.post(`${process.env.REACT_APP_API}/api/auth/resendotpmobile`,data).then(res=>{\r\n           if(res.data.Error==false){\r\n            NotificationManager.success('OTP has sent to your mobile number ', '', 800);\r\n           }\r\n       })\r\n   }\r\n\r\n\r\n    render() {\r\n        let { errors } = this.state\r\n        return (\r\n            <>\r\n                <Modal style={{ marginTop: \"100px\" }} show={this.props.show} onHide={this.props.handleClose}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>OTP</Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>            \r\n                                            <p style={{ textAlign: \"center\" }}>Your mobile number needs to be validated to proceed. An OTP has been sent on your mobile.</p>\r\n                                            <p style={{ textAlign: \"center\" }}>Enter OTP To Verify Mobile Number</p>\r\n                                            {this.state.otpErr? <p style={{ textAlign: \"center\",color:\"red\",marginTop:\"20px\" }}>OTP is Invalid</p>:\"\"}\r\n                                            {this.state.termsErr ? <p style={{ textAlign: \"center\", color: \"red\" }}>Please accept privacy policy and terms and conditions</p> : \"\"}\r\n                                                      <form>\r\n                                                    <div className=\"form-group\">\r\n                                                        <input type=\"text\" value={this.state.code} name='code'\r\n                                                            onChange={this.handleChange} className=\"form-control\"\r\n                                                            id=\"\" \r\n                                                            placeholder=\"OTP CODE\" noValidate />\r\n                                                    {errors.code.length > 0 &&\r\n                                                            <span className='error'>{errors.code}</span>}\r\n                                                    </div>\r\n                                                    <div style={{margin:\"20px 0px\"}} className=\"custom-control custom-checkbox\">\r\n                                    <input type=\"checkbox\" value={this.state.terms}\r\n                                        onChange={(e) => {\r\n                                            this.setState({ terms: !this.state.terms })\r\n                                        }} className=\"custom-control-input\" id=\"pc1\" />\r\n                                    <label className=\"custom-control-label\" htmlFor=\"pc1\">\r\n                                        I agree to <Link target=\"_blank\" to=\"/privacyandpolicy\">privacy policy </Link>and <Link target=\"_blank\" to=\"/termsandconditions\">terms & conditions</Link>.\r\n                                    </label>\r\n                                </div>\r\n\r\n                                                    <button type=\"button\" onClick={this.handleSubmit} className=\"submit w-100 mt-2\">Continue</button>\r\n                                                     <button type=\"button\" onClick={this.resend} className=\"submit w-100 mt-2\">Resend</button>\r\n \r\n                                                </form>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <Button variant=\"secondary\" onClick={this.props.handleClose}>\r\n                            Close\r\n                       </Button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n\r\n\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(MobileVeriication)\r\n"]},"metadata":{},"sourceType":"module"}