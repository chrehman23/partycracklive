{"ast":null,"code":"var _jsxFileName = \"D:\\\\react\\\\backup chat\\\\partycracklive\\\\src\\\\pages\\\\auth\\\\index.js\";\nimport React from 'react';\nimport '../vendorSignup/vendorsignup.css';\nimport Footer from \"../../Components/footer/footer\";\nimport Header from \"../../Components/topHeader/index\";\nimport axios from \"axios\";\nimport { Link, withRouter } from 'react-router-dom';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nimport 'react-notifications/lib/notifications.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst validEmailRegex = RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);\n\nconst validateForm = errors => {\n  let valid = true;\n  Object.values(errors).forEach(val => val.length > 0 && (valid = false));\n  return valid;\n};\n\nclass Auth extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      event.preventDefault();\n      const {\n        name,\n        value\n      } = event.target;\n      let errors = this.state.errors;\n\n      switch (name) {\n        case 'code':\n          errors.code = value.length < 6 ? 'Code must be 6 Characters long' : '';\n          break;\n\n        default:\n          break;\n      }\n\n      this.setState({\n        errors,\n        [name]: value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      this.setState({\n        otpErr: false\n      });\n      let id = localStorage.getItem('vendor_id');\n      let data = {\n        otp: this.state.code,\n        id: id\n      };\n\n      if (validateForm(this.state.errors)) {\n        let _this = this;\n\n        axios.post(`${process.env.REACT_APP_API}/api/auth/otpverification`, data).then(res => {\n          if (res.data.Error == false) {\n            let checkin = [];\n            localStorage.setItem('token', res.data.token);\n            localStorage.setItem('name', res.data.data.name);\n            let loginData = JSON.parse(localStorage.getItem(\"checkin\"));\n\n            if (loginData && loginData.length) {\n              let data = JSON.parse(localStorage.getItem(\"checkin\"));\n              var index = data.findIndex(x => x.uni == res.data.data._id);\n              index === -1 ? data.push({\n                uni: res.data.data._id,\n                isTime: true\n              }) : console.log(\"object already exists\");\n              localStorage.setItem(\"checkin\", JSON.stringify(data));\n            } else {\n              checkin.push({\n                uni: res.data.data._id,\n                isTime: true\n              });\n              localStorage.setItem('checkin', JSON.stringify(checkin));\n            }\n\n            this.props.history.push('/vendor-dashboard');\n          } else {\n            this.setState({\n              otpErr: true\n            });\n          }\n        }).catch(e => {\n          console.log(e);\n        });\n      } else {}\n    };\n\n    this.resend = () => {\n      let data = {\n        id: localStorage.getItem('vendor_id')\n      };\n      axios.post(`${process.env.REACT_APP_API}/api/auth/resendotp`, data).then(res => {\n        if (res.data.message == \"success\") {\n          NotificationManager.success('OTP has sent to your Email ', '', 1000);\n        }\n      });\n    };\n\n    this.state = {\n      code: null,\n      otpErr: false,\n      errors: {\n        code: ''\n      }\n    };\n  }\n\n  render() {\n    let {\n      errors\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"banner\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container-pic\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"area\",\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"sign\",\n              children: \"OTP\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid container-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row form-row-wrapper my-5\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 col-md-6\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"wrapper \",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-wrapper py-5\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      style: {\n                        textAlign: \"center\"\n                      },\n                      className: \"fo\",\n                      children: \"Grow Up Your Business With Partycrack\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 131,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        textAlign: \"center\"\n                      },\n                      children: \"Please validate your email address to proceed. An OTP has been sent over email. Please enter the OTP\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 133,\n                      columnNumber: 45\n                    }, this), this.state.otpErr ? /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        textAlign: \"center\",\n                        color: \"red\",\n                        marginTop: \"20px\"\n                      },\n                      children: \"OTP is Invalid\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 134,\n                      columnNumber: 65\n                    }, this) : \"\", /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex justify-content-center py-3\",\n                      children: /*#__PURE__*/_jsxDEV(\"form\", {\n                        onSubmit: this.handleSubmit,\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"form-group\",\n                          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"text\",\n                            value: this.state.code,\n                            name: \"code\",\n                            onChange: this.handleChange,\n                            className: \"form-control\",\n                            id: \"\",\n                            placeholder: \"OTP CODE\",\n                            noValidate: true\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 138,\n                            columnNumber: 57\n                          }, this), errors.code.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                            className: \"error\",\n                            children: errors.code\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 143,\n                            columnNumber: 61\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 137,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          type: \"submit\",\n                          className: \"submit w-100 mt-2\",\n                          children: \"Continue\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 146,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          type: \"button\",\n                          onClick: this.resend,\n                          className: \"submit w-100 mt-2\",\n                          children: \"Resend\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 147,\n                          columnNumber: 54\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 136,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 135,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 130,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 col-md-6 px-0\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"imageWrapper d-flex align-items-center justify-content-center h-100\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"button-wrap\",\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      className: \"btn btn-lg\",\n                      children: \"Welcome to Partycrack\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 158,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 157,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(NotificationContainer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default _c = withRouter(Auth);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["D:/react/backup chat/partycracklive/src/pages/auth/index.js"],"names":["React","Footer","Header","axios","Link","withRouter","NotificationContainer","NotificationManager","validEmailRegex","RegExp","validateForm","errors","valid","Object","values","forEach","val","length","Auth","Component","constructor","props","handleChange","event","preventDefault","name","value","target","state","code","setState","handleSubmit","otpErr","id","localStorage","getItem","data","otp","_this","post","process","env","REACT_APP_API","then","res","Error","checkin","setItem","token","loginData","JSON","parse","index","findIndex","x","uni","_id","push","isTime","console","log","stringify","history","catch","e","resend","message","success","render","textAlign","color","marginTop"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport '../vendorSignup/vendorsignup.css'\r\nimport Footer from \"../../Components/footer/footer\"\r\nimport Header from \"../../Components/topHeader/index\"\r\nimport axios from \"axios\";\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\n\r\nconst validEmailRegex = RegExp(\r\n    /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i\r\n);\r\nconst validateForm = errors => {\r\n    let valid = true;\r\n    Object.values(errors).forEach(val => val.length > 0 && (valid = false));\r\n    return valid;\r\n};\r\n\r\nclass Auth extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            code: null,\r\n            otpErr:false,\r\n            errors: {\r\n                code: '',\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        event.preventDefault();\r\n        const { name, value } = event.target;\r\n        let errors = this.state.errors;\r\n\r\n        switch (name) {\r\n            case 'code':\r\n                errors.code =\r\n                    value.length <6\r\n                        ? 'Code must be 6 Characters long'\r\n                        : '';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        this.setState({ errors, [name]: value });\r\n    }\r\n\r\n    handleSubmit =  (event) => {\r\n        event.preventDefault();\r\n        this.setState({\r\n            otpErr:false\r\n        })\r\n\r\n        let id =localStorage.getItem('vendor_id')\r\n        let data = {\r\n            otp: this.state.code,\r\n            id:id\r\n        }\r\n        if (validateForm(this.state.errors)) {\r\n            let _this = this\r\n             axios.post(`${process.env.REACT_APP_API}/api/auth/otpverification`, data).then(res => {\r\n                if (res.data.Error ==false) {\r\n                    let checkin=[]\r\n                    localStorage.setItem('token',res.data.token)\r\n                    localStorage.setItem('name',res.data.data.name)\r\n                                             let loginData=JSON.parse(localStorage.getItem(\"checkin\"))\r\n                        if(loginData && loginData.length){\r\n                            let data= JSON.parse(localStorage.getItem(\"checkin\"))\r\n                            var index = data.findIndex(x => x.uni==res.data.data._id); \r\n                            index === -1 ? data.push({uni:res.data.data._id,isTime:true}) : console.log(\"object already exists\")\r\n                                localStorage.setItem(\"checkin\",JSON.stringify(data)) \r\n\r\n                        }else{\r\n                            checkin.push({uni:res.data.data._id,isTime:true})\r\n                            localStorage.setItem('checkin',JSON.stringify(checkin))\r\n                        } \r\n                    this.props.history.push('/vendor-dashboard')\r\n\r\n                } else {\r\n                    this.setState({\r\n                        otpErr:true\r\n                    })\r\n\r\n                }\r\n\r\n            }).catch(e => {\r\n                console.log(e)\r\n            }\r\n\r\n            )\r\n        }else{\r\n\r\n        }\r\n    }\r\n   resend=()=>{\r\n    let data={\r\n        id:localStorage.getItem('vendor_id')\r\n    }\r\n       axios.post(`${process.env.REACT_APP_API}/api/auth/resendotp`,data).then(res=>{\r\n           if(res.data.message==\"success\"){\r\n            NotificationManager.success('OTP has sent to your Email ', '', 1000);\r\n           }\r\n       })\r\n   }\r\n\r\n    render() {\r\n        let { errors } = this.state\r\n        return (\r\n            <>\r\n                <Header />\r\n                <div className=\"banner\">\r\n\r\n                    <div className=\"container-pic\">\r\n                        <div className=\"area\">\r\n                            <h1 className=\"sign\">OTP</h1>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"container-fluid container-lg\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12\">\r\n                            <div className=\"row form-row-wrapper my-5\">\r\n                                <div className=\"col-12 col-md-6\">\r\n                                    <div className='wrapper '>\r\n                                        <div className='form-wrapper py-5'>\r\n                                            <h3 style={{ textAlign: \"center\" }} className=\"fo\">Grow Up Your Business With\r\n                                                Partycrack</h3>\r\n                                            <p style={{ textAlign: \"center\" }}>Please validate your email address to proceed. An OTP has been sent over email. Please enter the OTP</p>\r\n                                            {this.state.otpErr? <p style={{ textAlign: \"center\",color:\"red\",marginTop:\"20px\" }}>OTP is Invalid</p>:\"\"}\r\n                                            <div className=\"d-flex justify-content-center py-3\">\r\n                                                <form onSubmit={this.handleSubmit}>\r\n                                                    <div className=\"form-group\">\r\n                                                        <input type=\"text\" value={this.state.code} name='code'\r\n                                                            onChange={this.handleChange} className=\"form-control\"\r\n                                                            id=\"\" \r\n                                                            placeholder=\"OTP CODE\" noValidate />\r\n                                                    {errors.code.length > 0 &&\r\n                                                            <span className='error'>{errors.code}</span>}\r\n                                                    </div>\r\n\r\n                                                    <button type=\"submit\" className=\"submit w-100 mt-2\">Continue</button>\r\n                                                     <button type=\"button\" onClick={this.resend} className=\"submit w-100 mt-2\">Resend</button>\r\n \r\n                                                </form>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"col-12 col-md-6 px-0\">\r\n                                    <div\r\n                                        className=\"imageWrapper d-flex align-items-center justify-content-center h-100\">\r\n                                        <div className=\"button-wrap\">\r\n                                            <a className=\"btn btn-lg\">Welcome to Partycrack</a>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <NotificationContainer />\r\n\r\n                </div>\r\n                <Footer />\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(Auth)\r\n"]},"metadata":{},"sourceType":"module"}