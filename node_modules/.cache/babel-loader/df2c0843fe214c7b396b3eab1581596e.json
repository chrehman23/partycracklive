{"ast":null,"code":"import _regeneratorRuntime from\"D:/react/backup chat/partycracklive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/react/backup chat/partycracklive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"D:/react/backup chat/partycracklive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"D:/react/backup chat/partycracklive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/react/backup chat/partycracklive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:/react/backup chat/partycracklive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:/react/backup chat/partycracklive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/react/backup chat/partycracklive/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Footer from\"../../Components/footer/footer\";import Header from\"../../Components/topHeader/index\";import axios from\"axios\";import{Link,withRouter}from'react-router-dom';import{NotificationContainer,NotificationManager}from'react-notifications';import'react-notifications/lib/notifications.css';import AddListing from\"../../Components/venderDashboard/addNewListing/index\";import{Button,Modal}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var validateForm=function validateForm(errors){var valid=true;Object.values(errors).forEach(function(val){return val.length>0&&(valid=false);});return valid;};var MobileVeriication=/*#__PURE__*/function(_React$Component){_inherits(MobileVeriication,_React$Component);var _super=_createSuper(MobileVeriication);function MobileVeriication(){var _this;_classCallCheck(this,MobileVeriication);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={code:null,otpErr:false,errors:{code:''},termsErr:false,terms:false,listingId:\"\",addList:false,payment:false};_this.handleChange=function(event){event.preventDefault();var _event$target=event.target,name=_event$target.name,value=_event$target.value;var errors=_this.state.errors;switch(name){case'code':errors.code=value.length<6?'Code must be 6 Characters long':'';break;default:break;}_this.setState(_defineProperty({errors:errors},name,value));};_this.varifyCode=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data={Mobile_Number:_this.props.mobileNumber,OTP:_this.state.code};_context.next=3;return axios.post(\"\".concat(process.env.REACT_APP_API,\"/api/auth/mobileotpverification\"),data).then(function(res){if(res.data.Error==false){_this.addListing();}else{_this.setState({otpErr:true});}});case 3:case\"end\":return _context.stop();}}},_callee);}));_this.addListing=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var token,that,Config;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:token=localStorage.getItem(\"token\");that=_assertThisInitialized(_this);Config={onUploadProgress:function onUploadProgress(progressEvent){var percentCompleted=Math.round(progressEvent.loaded*100/progressEvent.total);// that.setState({ filesProgress: percentCompleted });\n},headers:{Authorization:\"Bearer \".concat(token)}};_context2.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API,\"/api/auth/addlisting\"),_this.props.formData,Config).then(function(res){if(res.data.success){_this.props.paymentModalShow(res.data.listing._id);// this.paymentMethod(res.data.listing._id)\n}else{console.log(\"error\");}});case 5:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleSubmit=function(event){event.preventDefault();_this.setState({otpErr:false,termsErr:false});var id=localStorage.getItem('vendor_id');if(_this.state.terms==false){_this.setState({termsErr:true});}else if(validateForm(_this.state.errors)){_this.varifyCode();}else{}};_this.paymentMethod=function(Listid){var id=localStorage.getItem(\"vendor_id\");var Name=localStorage.getItem('packagename');var Price=localStorage.getItem('packageprice');var data={vendor_id:id,listing_id:Listid,payment_type:\"Paypal\",package:{name:Name,price:Price},paypal:{token:\"864as6d846\",payId:\"asdasdsadsad\"}};axios.put(\"\".concat(process.env.REACT_APP_API,\"/api/auth/getPaypal\"),data).then(function(res){if(res.data.url){window.location.href=res.data.url;}else{console.log(\"error\");}});};_this.resend=function(){var data={Mobile_Number:_this.props.mobileNumber};axios.post(\"\".concat(process.env.REACT_APP_API,\"/api/auth/resendotpmobile\"),data).then(function(res){if(res.data.Error==false){NotificationManager.success('OTP has sent to your mobile number ','',800);}});};return _this;}_createClass(MobileVeriication,[{key:\"render\",value:function render(){var _this2=this;var errors=this.state.errors;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Modal,{style:{marginTop:\"100px\"},show:this.props.show,onHide:this.props.handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"OTP\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\"},children:\"Your mobile number needs to be validated to proceed. An OTP has been sent on your mobile.\"}),/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\"},children:\"Enter OTP To Verify Mobile Number\"}),this.state.otpErr?/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\",color:\"red\",marginTop:\"20px\"},children:\"OTP is Invalid\"}):\"\",this.state.termsErr?/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\",color:\"red\"},children:\"Please accept privacy policy and terms and conditions\"}):\"\",/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:this.state.code,name:\"code\",onChange:this.handleChange,className:\"form-control\",id:\"\",placeholder:\"OTP CODE\",noValidate:true}),errors.code.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:errors.code})]}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"20px 0px\"},className:\"custom-control custom-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:this.state.terms,onChange:function onChange(e){_this2.setState({terms:!_this2.state.terms});},className:\"custom-control-input\",id:\"pc1\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"custom-control-label\",htmlFor:\"pc1\",children:[\"I agree to \",/*#__PURE__*/_jsx(Link,{target:\"_blank\",to:\"/privacyandpolicy\",children:\"privacy policy \"}),\"and \",/*#__PURE__*/_jsx(Link,{target:\"_blank\",to:\"/termsandconditions\",children:\"terms & conditions\"}),\".\"]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.handleSubmit,className:\"submit w-100 mt-2\",children:\"Continue\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.resend,className:\"submit w-100 mt-2\",children:\"Resend\"})]})]}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:this.props.handleClose,children:\"Close\"})})]})});}}]);return MobileVeriication;}(React.Component);export default withRouter(MobileVeriication);","map":{"version":3,"sources":["D:/react/backup chat/partycracklive/src/Components/Modals/mobileVerification.jsx"],"names":["React","Footer","Header","axios","Link","withRouter","NotificationContainer","NotificationManager","AddListing","Button","Modal","validateForm","errors","valid","Object","values","forEach","val","length","MobileVeriication","state","code","otpErr","termsErr","terms","listingId","addList","payment","handleChange","event","preventDefault","target","name","value","setState","varifyCode","data","Mobile_Number","props","mobileNumber","OTP","post","process","env","REACT_APP_API","then","res","Error","addListing","token","localStorage","getItem","that","Config","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","headers","Authorization","formData","success","paymentModalShow","listing","_id","console","log","handleSubmit","id","paymentMethod","Listid","Name","Price","vendor_id","listing_id","payment_type","package","price","paypal","payId","put","url","window","location","href","resend","marginTop","show","handleClose","textAlign","color","margin","e","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Footer from \"../../Components/footer/footer\"\r\nimport Header from \"../../Components/topHeader/index\"\r\nimport axios from \"axios\";\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\nimport AddListing from \"../../Components/venderDashboard/addNewListing/index\"\r\nimport {Button,Modal} from \"react-bootstrap\"\r\n\r\n\r\n\r\n;\r\nconst validateForm = errors => {\r\n    let valid = true;\r\n    Object.values(errors).forEach(val => val.length > 0 && (valid = false));\r\n    return valid;\r\n};\r\n\r\nclass MobileVeriication extends React.Component {\r\n    state = {\r\n        code: null,\r\n        otpErr:false,\r\n        errors: {\r\n            code: '',\r\n        },\r\n        termsErr:false,\r\n        terms:false,\r\n        listingId:\"\",\r\n        addList:false,\r\n        payment:false\r\n    }\r\n    handleChange = (event) => {\r\n        event.preventDefault();\r\n        const { name, value } = event.target;\r\n        let errors = this.state.errors;\r\n\r\n        switch (name) {\r\n            case 'code':\r\n                errors.code =\r\n                    value.length <6\r\n                        ? 'Code must be 6 Characters long'\r\n                        : '';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        this.setState({ errors, [name]: value });\r\n    }\r\n\r\nvarifyCode=async()=>{\r\n    let data={\r\n        Mobile_Number: this.props.mobileNumber,\r\n        OTP: this.state.code\r\n    }\r\n   await axios.post(`${process.env.REACT_APP_API}/api/auth/mobileotpverification`, data).then(res => {\r\n        if (res.data.Error==false) {\r\n        this.addListing()\r\n        }\r\n        else {\r\n         this.setState({\r\n             otpErr:true\r\n         })\r\n        }\r\n      })\r\n}\r\naddListing=async()=>{\r\n    let token = localStorage.getItem(\"token\")\r\n    let that = this;\r\n    const Config = {\r\n      onUploadProgress: function (progressEvent) {\r\n        let percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n        // that.setState({ filesProgress: percentCompleted });\r\n      },\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      }\r\n    }\r\n   await axios.post(`${process.env.REACT_APP_API}/api/auth/addlisting`, this.props.formData, Config).then(res => {\r\n        if (res.data.success) {      \r\n            this.props.paymentModalShow(res.data.listing._id)                      \r\n         // this.paymentMethod(res.data.listing._id)\r\n        }\r\n        else {\r\n          console.log(\"error\")\r\n        }\r\n      }) \r\n}\r\n\r\n    handleSubmit =  (event) => {\r\n        event.preventDefault();\r\n        this.setState({\r\n            otpErr:false,\r\n            termsErr:false\r\n        })\r\n\r\n        let id =localStorage.getItem('vendor_id')\r\n        if(this.state.terms==false){\r\n           this.setState({\r\n               termsErr:true\r\n           })\r\n        }\r\n        else if (validateForm(this.state.errors)){\r\n             this.varifyCode();\r\n        }else{\r\n\r\n        } \r\n    }\r\n    paymentMethod=(Listid)=>{\r\n        let id = localStorage.getItem(\"vendor_id\")\r\n        let Name = localStorage.getItem('packagename')\r\n        let Price = localStorage.getItem('packageprice')\r\n        let data = {\r\n            vendor_id: id,\r\n            listing_id: Listid,\r\n            payment_type: \"Paypal\",\r\n            package: {\r\n              name: Name,\r\n              price: Price\r\n            },\r\n            paypal: {\r\n              token: \"864as6d846\",\r\n              payId: \"asdasdsadsad\"\r\n            }\r\n      \r\n          }\r\n         axios.put(`${process.env.REACT_APP_API}/api/auth/getPaypal`, data).then(res => {\r\n            if (res.data.url) {\r\n              window.location.href = res.data.url\r\n            }\r\n            else {\r\n              console.log(\"error\")\r\n            }\r\n          })\r\n    }\r\n   resend=()=>{\r\n    let data={\r\n        Mobile_Number:this.props.mobileNumber\r\n    }\r\n       axios.post(`${process.env.REACT_APP_API}/api/auth/resendotpmobile`,data).then(res=>{\r\n           if(res.data.Error==false){\r\n            NotificationManager.success('OTP has sent to your mobile number ', '', 800);\r\n           }\r\n       })\r\n   }\r\n\r\n\r\n    render() {\r\n        let { errors } = this.state\r\n        return (\r\n            <>\r\n                <Modal style={{ marginTop: \"100px\" }} show={this.props.show} onHide={this.props.handleClose}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>OTP</Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>            \r\n                                            <p style={{ textAlign: \"center\" }}>Your mobile number needs to be validated to proceed. An OTP has been sent on your mobile.</p>\r\n                                            <p style={{ textAlign: \"center\" }}>Enter OTP To Verify Mobile Number</p>\r\n                                            {this.state.otpErr? <p style={{ textAlign: \"center\",color:\"red\",marginTop:\"20px\" }}>OTP is Invalid</p>:\"\"}\r\n                                            {this.state.termsErr ? <p style={{ textAlign: \"center\", color: \"red\" }}>Please accept privacy policy and terms and conditions</p> : \"\"}\r\n                                                      <form>\r\n                                                    <div className=\"form-group\">\r\n                                                        <input type=\"text\" value={this.state.code} name='code'\r\n                                                            onChange={this.handleChange} className=\"form-control\"\r\n                                                            id=\"\" \r\n                                                            placeholder=\"OTP CODE\" noValidate />\r\n                                                    {errors.code.length > 0 &&\r\n                                                            <span className='error'>{errors.code}</span>}\r\n                                                    </div>\r\n                                                    <div style={{margin:\"20px 0px\"}} className=\"custom-control custom-checkbox\">\r\n                                    <input type=\"checkbox\" value={this.state.terms}\r\n                                        onChange={(e) => {\r\n                                            this.setState({ terms: !this.state.terms })\r\n                                        }} className=\"custom-control-input\" id=\"pc1\" />\r\n                                    <label className=\"custom-control-label\" htmlFor=\"pc1\">\r\n                                        I agree to <Link target=\"_blank\" to=\"/privacyandpolicy\">privacy policy </Link>and <Link target=\"_blank\" to=\"/termsandconditions\">terms & conditions</Link>.\r\n                                    </label>\r\n                                </div>\r\n\r\n                                                    <button type=\"button\" onClick={this.handleSubmit} className=\"submit w-100 mt-2\">Continue</button>\r\n                                                     <button type=\"button\" onClick={this.resend} className=\"submit w-100 mt-2\">Resend</button>\r\n \r\n                                                </form>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <Button variant=\"secondary\" onClick={this.props.handleClose}>\r\n                            Close\r\n                       </Button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n\r\n\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(MobileVeriication)\r\n"]},"metadata":{},"sourceType":"module"}